# WhatsApp Forensic Analyzer - Environment Configuration
# Copy this file to .env and update with your values

# gemini-comment: This file is for development and local testing ONLY.
# DO NOT use .env files for managing secrets in production environments.
# In production, use Docker secrets, Kubernetes secrets, or a dedicated
# secrets management service (e.g., HashiCorp Vault) to securely provide
# these environment variables.

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
ENVIRONMENT=development
APP_NAME="WhatsApp Forensic Analyzer"
APP_VERSION=1.0.0
DEBUG=True

# Security Keys (Generate new random keys for production!)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=your-secret-key-here-change-in-production
JWT_SECRET_KEY=your-jwt-secret-key-here-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=8

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# STANDARD DATABASE NAME: forensic_wa (DO NOT CHANGE)
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=forensic_wa
DATABASE_USER=forensic_user
DATABASE_PASSWORD=your-db-password-here

# Full connection URL (constructed from above)
DATABASE_URL=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}

# Connection Pool
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ============================================================================
# CELERY CONFIGURATION
# ============================================================================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# ============================================================================
# API CONFIGURATION
# ============================================================================
# STANDARD PORT: 8000 (DO NOT CHANGE without updating documentation)
API_HOST=0.0.0.0
API_PORT=8000
API_BASE_PATH=/api
API_DOCS_URL=/docs
API_REDOC_URL=/redoc

# CORS Settings
CORS_ORIGINS=["http://localhost:8000"]
CORS_ALLOW_CREDENTIALS=True

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100
LOGIN_RATE_LIMIT_PER_15MIN=5

# ============================================================================
# FILE STORAGE CONFIGURATION
# ============================================================================
UPLOAD_DIR=./uploads
MAX_UPLOAD_SIZE_MB=2048
ALLOWED_EXTENSIONS=.sqlite,.db,.crypt14,.jpg,.jpeg,.png,.mp4,.mp3,.pdf,.opus,.m4a

# Storage Structure
EVIDENCE_DIR=./uploads/evidence
WORKING_DIR=./uploads/working

# ============================================================================
# AUTHENTICATION CONFIGURATION
# ============================================================================
# Password Requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_LOWERCASE=True
PASSWORD_REQUIRE_DIGITS=True
PASSWORD_REQUIRE_SPECIAL=True

# Session Configuration
SESSION_TIMEOUT_HOURS=8
REFRESH_TOKEN_EXPIRY_DAYS=30

# First Admin User (Created on first run)
ADMIN_USERNAME=admin
ADMIN_PASSWORD=ChangeThisSecurePassword123!
ADMIN_EMAIL=admin@forensics.local
ADMIN_FULL_NAME=System Administrator

# ============================================================================
# AI MODEL CONFIGURATION
# ============================================================================
# Local AI (Default - works offline)
USE_LOCAL_AI=True
WHISPER_MODEL=base
WHISPER_DEVICE=cpu
SPACY_MODEL=en_core_web_trf

# Optional: Cloud AI (requires internet)
USE_CLOUD_AI=False
OPENAI_API_KEY=sk-your-openai-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# PII Detection
PII_CONFIDENCE_THRESHOLD=0.65
PII_VERIFY_WITH_HUMAN=True

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_DIR=./logs
LOG_ROTATION_DAYS=30

# Audit Logging
AUDIT_LOG_RETENTION_YEARS=5

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_ENABLED=True
BACKUP_DIR=./backups
BACKUP_SCHEDULE_CRON=0 2 * * *
BACKUP_RETENTION_DAYS=30

# Backup Method
DB_BACKUP_FORMAT=custom
EVIDENCE_BACKUP_METHOD=rsync

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# HTTPS (Production only)
USE_HTTPS=False
SSL_CERT_PATH=/path/to/cert.pem
SSL_KEY_PATH=/path/to/key.pem

# Security Headers
ENABLE_HSTS=True
HSTS_MAX_AGE=31536000

# ============================================================================
# MONITORING & HEALTH CHECKS
# ============================================================================
ENABLE_METRICS=True
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL_SECONDS=30

# ============================================================================
# FORENSIC SETTINGS
# ============================================================================
# Chain of Custody
ENABLE_CHAIN_OF_CUSTODY=True
REQUIRE_EXAMINER_SIGNATURE=False
LAB_ACCREDITATION_INFO=Forensic Analysis Laboratory

# Evidence Verification
VERIFY_HASH_ON_UPLOAD=True
VERIFY_HASH_BEFORE_PROCESSING=True
HASH_ALGORITHM=sha256

# Report Generation
REPORT_INCLUDE_METADATA=True
REPORT_INCLUDE_CHAIN_OF_CUSTODY=True
REPORT_WATERMARK=FORENSIC EVIDENCE - CONFIDENTIAL

# ============================================================================
# DOCKER CONFIGURATION (when running in containers)
# ============================================================================
# Override these when using Docker Compose
# DATABASE_HOST=postgres
# REDIS_HOST=redis
# CELERY_BROKER_URL=redis://redis:6379/0

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================
# Hot Reload
RELOAD_ON_CHANGE=True

# Debug Tools
ENABLE_PROFILER=False
ENABLE_QUERY_LOGGING=False

# Test Mode
TEST_MODE=False
USE_TEST_DATABASE=False
